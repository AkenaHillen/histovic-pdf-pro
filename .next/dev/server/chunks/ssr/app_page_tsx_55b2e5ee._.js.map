{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Histovic_Studios/PDF_TOOLS/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { PDFDocument } from 'pdf-lib';\r\n\r\n/**\r\n * HISTOVIC PDF ENGINE \r\n * Fixed: Explicitly returns Uint8Array to satisfy BlobPart requirements\r\n */\r\nconst mergePDFs = async (buffers: ArrayBuffer[]): Promise<Uint8Array> => {\r\n  const mergedPdf = await PDFDocument.create();\r\n  \r\n  for (const buffer of buffers) {\r\n    const pdf = await PDFDocument.load(buffer);\r\n    const copiedPages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());\r\n    copiedPages.forEach((page) => mergedPdf.addPage(page));\r\n  }\r\n  \r\n  return await mergedPdf.save();\r\n};\r\n\r\nexport default function PdfApp() {\r\n  const [files, setFiles] = useState<File[]>([]);\r\n  const [processing, setProcessing] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  // Handle file selection\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const selected = Array.from(e.target.files || []);\r\n    setFiles(prev => [...prev, ...selected]);\r\n    setSuccess(false);\r\n  };\r\n\r\n  // Remove file\r\n  const removeFile = (index: number) => {\r\n    setFiles(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  // Move file up/down for custom merge order\r\n  const moveFile = (index: number, direction: \"up\" | \"down\") => {\r\n    const newFiles = [...files];\r\n    const targetIndex = direction === \"up\" ? index - 1 : index + 1;\r\n    if (targetIndex < 0 || targetIndex >= files.length) return;\r\n    [newFiles[index], newFiles[targetIndex]] = [newFiles[targetIndex], newFiles[index]];\r\n    setFiles(newFiles);\r\n  };\r\n\r\n  // Handle merge logic\r\n  const handleMerge = async () => {\r\n    setProcessing(true);\r\n    setSuccess(false);\r\n\r\n    try {\r\n      // Convert Files to ArrayBuffers\r\n      const buffers = await Promise.all(files.map(f => f.arrayBuffer()));\r\n      \r\n      // Call Engine\r\n      const mergedBytes = await mergePDFs(buffers);\r\n\r\n      // FIX: Cast to Uint8Array to prevent \"ArrayBufferLike\" TypeScript error\r\n      const blob = new Blob([mergedBytes as Uint8Array], { type: 'application/pdf' });\r\n      const url = URL.createObjectURL(blob);\r\n\r\n      // Trigger Download\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `Histovic_Merged_${Date.now()}.pdf`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n\r\n      URL.revokeObjectURL(url); // Memory management\r\n      setSuccess(true);\r\n      setFiles([]); \r\n    } catch (e) {\r\n      console.error(\"Histovic Engine Error:\", e);\r\n      alert(\"Failed to merge PDFs. Ensure files are not password protected.\");\r\n    } finally {\r\n      setProcessing(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '40px',\r\n      backgroundColor: '#0f172a',\r\n      color: 'white',\r\n      minHeight: '100vh',\r\n      fontFamily: 'sans-serif',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center'\r\n    }}>\r\n      <div style={{ maxWidth: '600px', width: '100%' }}>\r\n        <h1 style={{ color: '#22d3ee', textAlign: 'center', fontSize: '2.5rem', marginBottom: '10px' }}>\r\n          HISTOVIC PDF PRO\r\n        </h1>\r\n        <p style={{ textAlign: 'center', color: '#94a3b8', marginBottom: '30px' }}>\r\n          Secure, Local PDF Merging for Professionals\r\n        </p>\r\n\r\n        {/* Drag & Drop Area */}\r\n        <div\r\n          onDragOver={(e) => e.preventDefault()}\r\n          onDrop={(e) => {\r\n            e.preventDefault();\r\n            const dropped = Array.from(e.dataTransfer.files).filter(f => f.type === 'application/pdf');\r\n            setFiles(prev => [...prev, ...dropped]);\r\n          }}\r\n          style={{\r\n            border: '2px dashed #22d3ee',\r\n            padding: '40px',\r\n            marginBottom: '20px',\r\n            textAlign: 'center',\r\n            borderRadius: '12px',\r\n            backgroundColor: '#1e293b',\r\n            cursor: 'pointer'\r\n          }}\r\n          onClick={() => document.getElementById('fileInput')?.click()}\r\n        >\r\n          <span style={{ fontSize: '1.2rem' }}>Drag & Drop PDFs Here or Click to Browse</span>\r\n          <input\r\n            id=\"fileInput\"\r\n            type=\"file\"\r\n            multiple\r\n            accept=\".pdf\"\r\n            onChange={handleFileChange}\r\n            style={{ display: 'none' }}\r\n          />\r\n        </div>\r\n\r\n        {/* File List */}\r\n        <div style={{ marginBottom: '20px' }}>\r\n          {files.map((file, index) => (\r\n            <div key={`${file.name}-${index}`} style={{\r\n              background: '#1e293b',\r\n              padding: '12px 16px',\r\n              marginBottom: '10px',\r\n              borderRadius: '8px',\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'center',\r\n              border: '1px solid #334155'\r\n            }}>\r\n              <span style={{ fontSize: '0.9rem', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', maxWidth: '60%' }}>\r\n                {file.name}\r\n              </span>\r\n\r\n              <div style={{ display: 'flex', gap: '8px' }}>\r\n                <button onClick={() => moveFile(index, \"up\")} style={btnIconStyle}>⬆</button>\r\n                <button onClick={() => moveFile(index, \"down\")} style={btnIconStyle}>⬇</button>\r\n                <button onClick={() => removeFile(index)} style={{ ...btnIconStyle, color: '#ef4444' }}>✕</button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Action Button */}\r\n        <button\r\n          onClick={handleMerge}\r\n          disabled={files.length < 2 || processing}\r\n          style={{\r\n            width: '100%',\r\n            padding: '16px',\r\n            backgroundColor: files.length < 2 ? '#334155' : '#06b6d4',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '8px',\r\n            cursor: files.length < 2 ? 'not-allowed' : 'pointer',\r\n            fontWeight: 'bold',\r\n            fontSize: '1rem',\r\n            transition: 'background 0.3s'\r\n          }}\r\n        >\r\n          {processing ? 'PROCESSING FILES...' : `MERGE ${files.length} PDFS`}\r\n        </button>\r\n\r\n        {success && (\r\n          <div style={{\r\n            marginTop: '20px',\r\n            padding: '15px',\r\n            backgroundColor: '#064e3b',\r\n            color: '#34d399',\r\n            borderRadius: '8px',\r\n            textAlign: 'center',\r\n            border: '1px solid #059669'\r\n          }}>\r\n            ✅ PDFs merged successfully! Your download should start automatically.\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst btnIconStyle: React.CSSProperties = {\r\n  background: '#334155',\r\n  border: 'none',\r\n  color: 'white',\r\n  padding: '5px 10px',\r\n  borderRadius: '4px',\r\n  cursor: 'pointer',\r\n  fontSize: '0.8rem'\r\n};"],"names":[],"mappings":"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"}}]
}