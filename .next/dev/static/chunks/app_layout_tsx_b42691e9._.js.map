{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Histovic_Studios/PDF_TOOLS/app/layout.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { PDFDocument } from 'pdf-lib';\r\n\r\nexport default function PdfApp() {\r\n  const [files, setFiles] = useState<File[]>([]);\r\n  const [processing, setProcessing] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n  const [mode, setMode] = useState<'merge' | 'compress'>('merge');\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const selected = Array.from(e.target.files || []);\r\n    // If compressing, we usually only handle one file at a time in this simple UI\r\n    if (mode === 'compress') {\r\n      setFiles(selected.slice(0, 1));\r\n    } else {\r\n      setFiles(prev => [...prev, ...selected]);\r\n    }\r\n    setSuccess(false);\r\n  };\r\n\r\n  const processPDF = async () => {\r\n    setProcessing(true);\r\n    setSuccess(false);\r\n\r\n    try {\r\n      const pdfDoc = await PDFDocument.create();\r\n      let finalBytes: Uint8Array;\r\n\r\n      if (mode === 'merge') {\r\n        for (const file of files) {\r\n          const buffer = await file.arrayBuffer();\r\n          const srcDoc = await PDFDocument.load(buffer);\r\n          const copiedPages = await pdfDoc.copyPages(srcDoc, srcDoc.getPageIndices());\r\n          copiedPages.forEach((page) => pdfDoc.addPage(page));\r\n        }\r\n        finalBytes = await pdfDoc.save();\r\n      } else {\r\n        // Compression Logic\r\n        const buffer = await files[0].arrayBuffer();\r\n        const srcDoc = await PDFDocument.load(buffer);\r\n        // pdf-lib compresses by default when saving with specific flags\r\n        finalBytes = await srcDoc.save({ \r\n          useObjectStreams: true, \r\n          addDefaultPage: false,\r\n          updateFieldAppearances: false \r\n        });\r\n      }\r\n\r\n      const blob = new Blob([finalBytes], { type: 'application/pdf' });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `Histovic_${mode === 'merge' ? 'Merged' : 'Compressed'}.pdf`;\r\n      link.click();\r\n      \r\n      setSuccess(true);\r\n      setFiles([]);\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert(\"Error processing PDF\");\r\n    } finally {\r\n      setProcessing(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={containerStyle}>\r\n      <h1 style={{ color: '#22d3ee', marginBottom: '5px' }}>HISTOVIC PDF PRO</h1>\r\n      <p style={{ color: '#94a3b8', marginBottom: '20px' }}>Fast • Secure • Local</p>\r\n\r\n      {/* Mode Switcher */}\r\n      <div style={{ marginBottom: '20px', display: 'flex', gap: '10px' }}>\r\n        <button \r\n          onClick={() => { setMode('merge'); setFiles([]); }}\r\n          style={mode === 'merge' ? activeTab : inactiveTab}>Merge Mode</button>\r\n        <button \r\n          onClick={() => { setMode('compress'); setFiles([]); }}\r\n          style={mode === 'compress' ? activeTab : inactiveTab}>Compress Mode</button>\r\n      </div>\r\n\r\n      <div\r\n        onDragOver={(e) => e.preventDefault()}\r\n        onDrop={(e) => {\r\n          e.preventDefault();\r\n          const dropped = Array.from(e.dataTransfer.files).filter(f => f.type === 'application/pdf');\r\n          setFiles(mode === 'compress' ? dropped.slice(0, 1) : prev => [...prev, ...dropped]);\r\n        }}\r\n        style={dropZoneStyle}\r\n      >\r\n        {mode === 'merge' ? \"Drop PDFs to Merge\" : \"Drop 1 PDF to Compress\"}\r\n        <input type=\"file\" multiple={mode === 'merge'} accept=\".pdf\" onChange={handleFileChange} style={{ marginTop: '10px' }} />\r\n      </div>\r\n\r\n      <div style={{ width: '100%', maxWidth: '400px', marginTop: '20px' }}>\r\n        {files.map((f, i) => (\r\n          <div key={i} style={fileItemStyle}>{f.name}</div>\r\n        ))}\r\n      </div>\r\n\r\n      {files.length > 0 && (\r\n        <button\r\n          onClick={processPDF}\r\n          disabled={processing || (mode === 'merge' && files.length < 2)}\r\n          style={actionButtonStyle}\r\n        >\r\n          {processing ? 'WORKING...' : mode === 'merge' ? 'MERGE NOW' : 'COMPRESS NOW'}\r\n        </button>\r\n      )}\r\n\r\n      {success && <p style={{ color: '#22c55e', marginTop: '15px' }}>✅ Done! Download started.</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\n// STYLES\r\nconst containerStyle: React.CSSProperties = {\r\n  padding: '40px', backgroundColor: '#0f172a', color: 'white', minHeight: '100vh',\r\n  fontFamily: 'sans-serif', display: 'flex', flexDirection: 'column', alignItems: 'center'\r\n};\r\n\r\nconst dropZoneStyle: React.CSSProperties = {\r\n  border: '2px dashed #22d3ee', padding: '40px', borderRadius: '12px',\r\n  backgroundColor: '#1e293b', textAlign: 'center', width: '100%', maxWidth: '500px'\r\n};\r\n\r\nconst actionButtonStyle: React.CSSProperties = {\r\n  marginTop: '20px', padding: '15px 40px', backgroundColor: '#06b6d4', color: 'white',\r\n  border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: 'bold'\r\n};\r\n\r\nconst fileItemStyle: React.CSSProperties = {\r\n  background: '#334155', padding: '10px', borderRadius: '5px', marginBottom: '5px', fontSize: '0.8rem'\r\n};\r\n\r\nconst activeTab: React.CSSProperties = {\r\n  padding: '10px 20px', backgroundColor: '#22d3ee', color: '#0f172a', border: 'none', borderRadius: '5px', fontWeight: 'bold', cursor: 'pointer'\r\n};\r\n\r\nconst inactiveTab: React.CSSProperties = {\r\n  padding: '10px 20px', backgroundColor: '#334155', color: 'white', border: 'none', borderRadius: '5px', cursor: 'pointer'\r\n};"],"names":[],"mappings":"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"}}]
}